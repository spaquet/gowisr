<%# app/views/users/profile.html.erb %>
<% content_for :title, "Your Profile - Gowisr" %>
<div class="bg-background-light py-6">
  <div class="container mx-auto px-4">
    <h1 class="text-2xl font-semibold">Your Profile</h1>
    <p class="text-text-muted">Manage your personal information</p>
  </div>
</div>
<div class="container mx-auto px-4 py-8">
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Sidebar Navigation -->
    <div class="lg:col-span-1">
      <div class="bg-background rounded-lg border border-background-lighter shadow-sm overflow-hidden">
        <div class="p-4 border-b border-background-lighter">
          <div class="flex items-center">
            <div class="h-12 w-12 rounded-full bg-primary-dark/30 flex items-center justify-center">
              <span class="text-primary font-semibold text-lg"><%= current_user.display_name[0] %></span>
            </div>
            <div class="ml-4">
              <p class="font-medium"><%= current_user.display_name %></p>
              <p class="text-sm text-text-muted"><%= current_user.email %></p>
            </div>
          </div>
        </div>
        <nav class="p-2">
          <a href="<%= profile_path %>" class="flex items-center px-3 py-2 rounded-md bg-background-light text-primary">
            <%= icon "user", library: "lucide", class: "h-5 w-5 mr-3" %>
            <span>Profile</span>
          </a>
          <a href="<%= settings_path %>" class="flex items-center px-3 py-2 rounded-md text-text-muted hover:bg-background-light hover:text-text transition">
            <%= icon "settings", library: "lucide", class: "h-5 w-5 mr-3" %>
            <span>Settings</span>
          </a>
          <a href="#" class="flex items-center px-3 py-2 rounded-md text-text-muted hover:bg-background-light hover:text-text transition">
            <%= icon "credit-card", library: "lucide", class: "h-5 w-5 mr-3" %>
            <span>Billing</span>
          </a>
          <a href="#" class="flex items-center px-3 py-2 rounded-md text-text-muted hover:bg-background-light hover:text-text transition">
            <%= icon "shield", library: "lucide", class: "h-5 w-5 mr-3" %>
            <span>Security</span>
          </a>
        </nav>
      </div>
    </div>
    <!-- Main Content -->
    <div class="lg:col-span-2">
      <div class="bg-background rounded-lg border border-background-lighter shadow-sm">
        <div class="p-6 border-b border-background-lighter">
          <h2 class="text-lg font-medium">Personal Information</h2>
          <p class="text-text-muted text-sm">Update your personal details</p>
        </div>
        <%= form_with model: @user, url: profile_path, method: :patch, class: "p-6 space-y-6" do |form| %>
          <% if @user.errors.any? %>
            <div class="rounded-md bg-accent-dark/20 p-4">
              <div class="flex">
                <div class="flex-shrink-0">
                  <%= icon "alert-triangle", library: "lucide", class: "h-5 w-5 text-accent" %>
                </div>
                <div class="ml-3">
                  <h3 class="text-sm font-medium text-accent-light">There were <%= pluralize(@user.errors.count, "error") %></h3>
                  <div class="mt-2 text-sm text-accent-light">
                    <ul class="list-disc pl-5 space-y-1">
                      <% @user.errors.full_messages.each do |message| %>
                        <li><%= message %></li>
                      <% end %>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
          <div>
            <%= form.label :email, "Email address", class: "block text-sm font-medium" %>
            <div class="mt-1 flex items-center">
              <%= form.email_field :email, class: "block w-full rounded-md border border-background-lighter bg-background-light shadow-sm px-4 py-3 focus:border-primary focus:ring focus:ring-primary/30 focus:outline-none" %>
              <div class="ml-2 flex-shrink-0">
                <% if current_user.verified? %>
                  <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-primary-dark/20 text-primary">
                    <%= icon "check-circle", library: "lucide", class: "h-3 w-3 mr-1" %>
                    Verified
                  </span>
                <% else %>
                  <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-accent-dark/20 text-accent">
                    Unverified
                  </span>
                <% end %>
              </div>
            </div>
          </div>
          <div class="pt-4">
            <%= form.submit "Save changes", class: "px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary" %>
          </div>
        <% end %>
      </div>
      <div class="mt-8 bg-background rounded-lg border border-background-lighter shadow-sm">
        <div class="p-6 border-b border-background-lighter">
          <h2 class="text-lg font-medium">Account Preferences</h2>
          <p class="text-text-muted text-sm">Manage your account settings</p>
        </div>
        <div class="p-6 space-y-6">
          <!-- Email Notifications -->
          <div class="flex items-center justify-between">
            <div>
              <h3 class="text-sm font-medium">Email Notifications</h3>
              <p class="text-text-muted text-sm">Receive email updates about your account</p>
            </div>
            <button type="button" class="relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary bg-primary" role="switch" aria-checked="true">
              <span class="sr-only">Use setting</span>
              <span aria-hidden="true" class="pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200 translate-x-5"></span>
            </button>
          </div>
          <!-- Language Preference -->
          <div>
            <h3 class="text-sm font-medium mb-2">Language Preference</h3>
            <select class="block w-full rounded-md border border-background-lighter bg-background-light shadow-sm px-4 py-3 focus:border-primary focus:ring focus:ring-primary/30 focus:outline-none">
              <option selected>English (US)</option>
              <option>French</option>
              <option>German</option>
              <option>Spanish</option>
            </select>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>